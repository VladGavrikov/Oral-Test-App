{% extends "base.html" %}
{% block content %}
<h3>Feedback for the test</h3>
    <p>{{unit.mark1Criteria}}: {{testMarks.mark1}}</p>
    <p>{{unit.mark2Criteria}}: {{testMarks.mark2}}</p>
    <p>{{unit.mark3Criteria}}: {{testMarks.mark3}}</p>
    <p>{{unit.mark4Criteria}}: {{testMarks.mark4}}</p>
    <p>Total: {{testMarks.mark1+testMarks.mark2+ testMarks.mark3+testMarks.mark4}}</p>
{%for i in range(numOfQuestions) %} 
    <h4>{{ questions[i].body }}</h4>
    {% if questions[i].path != "empty" %}
        <audio src={{questions[i].path}} id= "player" controls="controls"></audio><br>
    {% endif %}
    <h4>Answer:</h4>
    {% if answers[i].body != "empty" %}
        <audio src={{answers[i].body}} id= "player" controls="controls"></audio>
    {% else %}
        <p>Question unattempted</p>
    {% endif %}

    <h4>Feedback:</h4>
    <h5>{{ feedbacks[i].body}}</h5>
    {% if feedbacks[i].path != "empty" %}
        <audio src={{feedbacks[i].path}} id= "player" controls="controls"></audio>
    {% endif %}

    {% if answers[i].body == "empty" %}
        <div id="plot" style="width:500px;height:500px; display:none"></div>
    {% endif%}

    {% if answers[i].body != "empty" %}
        <div id="plot" style="width:500px;height:500px"></div>
    {% endif%}

    {% if feedbacks[i].path == "empty" %}
        <div id="plot2" style="width:500px;height:500px; display: none;"></div>
    {% endif%}

    {% if feedbacks[i].path != "empty" %}
        <div id="plot2" style="width:500px;height:500px;"></div>
    {% endif%}
    <hr>

    {% block javascript %}
        <script type="text/javascript">
                data = JSON.parse({{ data | tojson }})
                data2 = JSON.parse({{ data2 | tojson }})
                Plotly.newPlot("plot", [{ x: [...Array(data.length).keys()],
                    y: data.map(function(data) { return data == 0.0 ? undefined : data; }),
                    type: "scatter" }]);
                Plotly.newPlot("plot2", 
                                        [{ x: [...Array(data2.length).keys()],y: data2.map(function(data2) { return data2 == 0.0 ? undefined : data2; }),
                                            type: "scatter"}],{title: 'Feedback Pitch'}
                                );
        </script>
    {% endblock %}
{% endfor %}
    
    
{% endblock %}